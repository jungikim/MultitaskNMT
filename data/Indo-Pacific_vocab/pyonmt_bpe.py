import pyonmttok
import gzip
import shutil
import os

tokenizer = pyonmttok.Tokenizer("aggressive", \
                                joiner_annotate = True, \
                                no_substitution = True, \
                                segment_alphabet_change = True, \
                                segment_alphabet = ['Han', 'Kanbun', 'Katakana', 'Hiragana'], \
                                segment_numbers = True, \
                                preserve_segmented_tokens = True, \
                                support_prior_joiners = True)

print("Create tokenizer", flush=True)

learner = pyonmttok.BPELearner(tokenizer=tokenizer, symbols=32000, min_frequency=2)
print("Created BPE learner", flush=True)


for d in [
'data/ceb-bug/NLLB.bug-ceb.bug.gz',
'data/ceb-bug/NLLB.bug-ceb.ceb.gz',
'data/ceb-id/CCMatrix.ceb-id.ceb.gz',
'data/ceb-id/CCMatrix.ceb-id.id.gz',
'data/ceb-id/NLLB.ceb-id.ceb.gz',
'data/ceb-id/NLLB.ceb-id.id.gz',
'data/ceb-id/QED.ceb-id.ceb.gz',
'data/ceb-id/QED.ceb-id.id.gz',
'data/ceb-id/TED2020.ceb-id.ceb.gz',
'data/ceb-id/TED2020.ceb-id.id.gz',
'data/ceb-id/Ubuntu.ceb-id.ceb.gz',
'data/ceb-id/Ubuntu.ceb-id.id.gz',
'data/ceb-id/XLEnt.ceb-id.ceb.gz',
'data/ceb-id/XLEnt.ceb-id.id.gz',
'data/ceb-id/bible-uedin.ceb-id.ceb.gz',
'data/ceb-id/bible-uedin.ceb-id.id.gz',
'data/ceb-id/wikimedia.ceb-id.ceb.gz',
'data/ceb-id/wikimedia.ceb-id.id.gz',
'data/ceb-ilo/CCMatrix.ceb-ilo.ceb.gz',
'data/ceb-ilo/CCMatrix.ceb-ilo.ilo.gz',
'data/ceb-ilo/NLLB.ceb-ilo.ceb.gz',
'data/ceb-ilo/NLLB.ceb-ilo.ilo.gz',
'data/ceb-ilo/XLEnt.ceb-ilo.ceb.gz',
'data/ceb-ilo/XLEnt.ceb-ilo.ilo.gz',
'data/ceb-jv/CCMatrix.ceb-jv.ceb.gz',
'data/ceb-jv/CCMatrix.ceb-jv.jv.gz',
'data/ceb-jv/NLLB.ceb-jv.ceb.gz',
'data/ceb-jv/NLLB.ceb-jv.jv.gz',
'data/ceb-jv/QED.ceb-jv.ceb.gz',
'data/ceb-jv/QED.ceb-jv.jv.gz',
'data/ceb-jv/Ubuntu.ceb-jv.ceb.gz',
'data/ceb-jv/Ubuntu.ceb-jv.jv.gz',
'data/ceb-jv/XLEnt.ceb-jv.ceb.gz',
'data/ceb-jv/XLEnt.ceb-jv.jv.gz',
'data/ceb-min/NLLB.ceb-min.ceb.gz',
'data/ceb-min/NLLB.ceb-min.min.gz',
'data/ceb-ms/CCMatrix.ceb-ms.ceb.gz',
'data/ceb-ms/CCMatrix.ceb-ms.ms.gz',
'data/ceb-ms/NLLB.ceb-ms.ceb.gz',
'data/ceb-ms/NLLB.ceb-ms.ms.gz',
'data/ceb-ms/QED.ceb-ms.ceb.gz',
'data/ceb-ms/QED.ceb-ms.ms.gz',
'data/ceb-ms/TED2020.ceb-ms.ceb.gz',
'data/ceb-ms/TED2020.ceb-ms.ms.gz',
'data/ceb-ms/Ubuntu.ceb-ms.ceb.gz',
'data/ceb-ms/Ubuntu.ceb-ms.ms.gz',
'data/ceb-ms/XLEnt.ceb-ms.ceb.gz',
'data/ceb-ms/XLEnt.ceb-ms.ms.gz',
'data/ceb-ms/wikimedia.ceb-ms.ceb.gz',
'data/ceb-ms/wikimedia.ceb-ms.ms.gz',
'data/ceb-su/CCMatrix.ceb-su.ceb.gz',
'data/ceb-su/CCMatrix.ceb-su.su.gz',
'data/ceb-su/NLLB.ceb-su.ceb.gz',
'data/ceb-su/NLLB.ceb-su.su.gz',
'data/ceb-su/XLEnt.ceb-su.ceb.gz',
'data/ceb-su/XLEnt.ceb-su.su.gz',
'data/en-bug/NLLB.bug-en.bug.gz',
'data/en-bug/NLLB.bug-en.en.gz',
'data/en-bug/QED.bug-en.bug.gz',
'data/en-bug/QED.bug-en.en.gz',
'data/en-bug/wikimedia.bug-en.bug.gz',
'data/en-bug/wikimedia.bug-en.en.gz',
'data/en-ceb/CCMatrix.ceb-en.ceb.gz',
'data/en-ceb/CCMatrix.ceb-en.en.gz',
'data/en-ceb/NLLB.ceb-en.ceb.gz',
'data/en-ceb/NLLB.ceb-en.en.gz',
'data/en-ceb/QED.ceb-en.ceb.gz',
'data/en-ceb/QED.ceb-en.en.gz',
'data/en-ceb/TED2020.ceb-en.ceb.gz',
'data/en-ceb/TED2020.ceb-en.en.gz',
'data/en-ceb/Tatoeba.ceb-en.ceb.gz',
'data/en-ceb/Tatoeba.ceb-en.en.gz',
'data/en-ceb/Ubuntu.ceb-en.ceb.gz',
'data/en-ceb/Ubuntu.ceb-en.en.gz',
'data/en-ceb/WikiMatrix.ceb-en.ceb.gz',
'data/en-ceb/WikiMatrix.ceb-en.en.gz',
'data/en-ceb/XLEnt.ceb-en.ceb.gz',
'data/en-ceb/XLEnt.ceb-en.en.gz',
'data/en-ceb/bible-uedin.ceb-en.ceb.gz',
'data/en-ceb/bible-uedin.ceb-en.en.gz',
'data/en-ceb/wikimedia.ceb-en.ceb.gz',
'data/en-ceb/wikimedia.ceb-en.en.gz',
'data/en-id/CCAligned.en-id.en.gz',
'data/en-id/CCAligned.en-id.id.gz',
'data/en-id/CCMatrix.en-id.en.gz',
'data/en-id/CCMatrix.en-id.id.gz',
'data/en-id/ELRC-wikipedia_health.en-id.en.gz',
'data/en-id/ELRC-wikipedia_health.en-id.id.gz',
'data/en-id/GNOME.en-id.en.gz',
'data/en-id/GNOME.en-id.id.gz',
'data/en-id/GlobalVoices.en-id.en.gz',
'data/en-id/GlobalVoices.en-id.id.gz',
'data/en-id/KDE4.en-id.en.gz',
'data/en-id/KDE4.en-id.id.gz',
'data/en-id/NLLB.en-id.en.gz',
'data/en-id/NLLB.en-id.id.gz',
'data/en-id/NeuLab-TedTalks.en-id.en.gz',
'data/en-id/NeuLab-TedTalks.en-id.id.gz',
'data/en-id/News-Commentary.en-id.en.gz',
'data/en-id/News-Commentary.en-id.id.gz',
'data/en-id/OpenSubtitles.en-id.en.gz',
'data/en-id/OpenSubtitles.en-id.id.gz',
'data/en-id/QED.en-id.en.gz',
'data/en-id/QED.en-id.id.gz',
'data/en-id/TED2020.en-id.en.gz',
'data/en-id/TED2020.en-id.id.gz',
'data/en-id/Tanzil.en-id.en.gz',
'data/en-id/Tanzil.en-id.id.gz',
'data/en-id/Tatoeba.en-id.en.gz',
'data/en-id/Tatoeba.en-id.id.gz',
'data/en-id/Ubuntu.en-id.en.gz',
'data/en-id/Ubuntu.en-id.id.gz',
'data/en-id/WikiMatrix.en-id.en.gz',
'data/en-id/WikiMatrix.en-id.id.gz',
'data/en-id/XLEnt.en-id.en.gz',
'data/en-id/XLEnt.en-id.id.gz',
'data/en-id/bible-uedin.en-id.en.gz',
'data/en-id/bible-uedin.en-id.id.gz',
'data/en-id/tico-19.en-id.en.gz',
'data/en-id/tico-19.en-id.id.gz',
'data/en-id/tldr-pages.en-id.en.gz',
'data/en-id/tldr-pages.en-id.id.gz',
'data/en-id/wikimedia.en-id.en.gz',
'data/en-id/wikimedia.en-id.id.gz',
'data/en-ilo/CCMatrix.en-ilo.en.gz',
'data/en-ilo/CCMatrix.en-ilo.ilo.gz',
'data/en-ilo/NLLB.en-ilo.en.gz',
'data/en-ilo/NLLB.en-ilo.ilo.gz',
'data/en-ilo/Tatoeba.en-ilo.en.gz',
'data/en-ilo/Tatoeba.en-ilo.ilo.gz',
'data/en-ilo/XLEnt.en-ilo.en.gz',
'data/en-ilo/XLEnt.en-ilo.ilo.gz',
'data/en-ilo/wikimedia.en-ilo.en.gz',
'data/en-ilo/wikimedia.en-ilo.ilo.gz',
'data/en-jv/CCAligned.en-jv.en.gz',
'data/en-jv/CCAligned.en-jv.jv.gz',
'data/en-jv/CCMatrix.en-jv.en.gz',
'data/en-jv/CCMatrix.en-jv.jv.gz',
'data/en-jv/NLLB.en-jv.en.gz',
'data/en-jv/NLLB.en-jv.jv.gz',
'data/en-jv/QED.en-jv.en.gz',
'data/en-jv/QED.en-jv.jv.gz',
'data/en-jv/Tatoeba.en-jv.en.gz',
'data/en-jv/Tatoeba.en-jv.jv.gz',
'data/en-jv/Ubuntu.en-jv.en.gz',
'data/en-jv/Ubuntu.en-jv.jv.gz',
'data/en-jv/WikiMatrix.en-jv.en.gz',
'data/en-jv/WikiMatrix.en-jv.jv.gz',
'data/en-jv/XLEnt.en-jv.en.gz',
'data/en-jv/XLEnt.en-jv.jv.gz',
'data/en-jv/wikimedia.en-jv.en.gz',
'data/en-jv/wikimedia.en-jv.jv.gz',
'data/en-min/NLLB.en-min.en.gz',
'data/en-min/NLLB.en-min.min.gz',
'data/en-min/Tatoeba.en-min.en.gz',
'data/en-min/Tatoeba.en-min.min.gz',
'data/en-min/wikimedia.en-min.en.gz',
'data/en-min/wikimedia.en-min.min.gz',
'data/en-ms/CCAligned.en-ms.en.gz',
'data/en-ms/CCAligned.en-ms.ms.gz',
'data/en-ms/CCMatrix.en-ms.en.gz',
'data/en-ms/CCMatrix.en-ms.ms.gz',
'data/en-ms/ELRC-wikipedia_health.en-ms.en.gz',
'data/en-ms/ELRC-wikipedia_health.en-ms.ms.gz',
'data/en-ms/GNOME.en-ms.en.gz',
'data/en-ms/GNOME.en-ms.ms.gz',
'data/en-ms/KDE4.en-ms.en.gz',
'data/en-ms/KDE4.en-ms.ms.gz',
'data/en-ms/NLLB.en-ms.en.gz',
'data/en-ms/NLLB.en-ms.ms.gz',
'data/en-ms/NeuLab-TedTalks.en-ms.en.gz',
'data/en-ms/NeuLab-TedTalks.en-ms.ms.gz',
'data/en-ms/OpenSubtitles.en-ms.en.gz',
'data/en-ms/OpenSubtitles.en-ms.ms.gz',
'data/en-ms/QED.en-ms.en.gz',
'data/en-ms/QED.en-ms.ms.gz',
'data/en-ms/TED2020.en-ms.en.gz',
'data/en-ms/TED2020.en-ms.ms.gz',
'data/en-ms/Tanzil.en-ms.en.gz',
'data/en-ms/Tanzil.en-ms.ms.gz',
'data/en-ms/Ubuntu.en-ms.en.gz',
'data/en-ms/Ubuntu.en-ms.ms.gz',
'data/en-ms/XLEnt.en-ms.en.gz',
'data/en-ms/XLEnt.en-ms.ms.gz',
'data/en-ms/tico-19.en-ms.en.gz',
'data/en-ms/tico-19.en-ms.ms.gz',
'data/en-ms/wikimedia.en-ms.en.gz',
'data/en-ms/wikimedia.en-ms.ms.gz',
'data/en-su/CCAligned.en-su.en.gz',
'data/en-su/CCAligned.en-su.su.gz',
'data/en-su/CCMatrix.en-su.en.gz',
'data/en-su/CCMatrix.en-su.su.gz',
'data/en-su/NLLB.en-su.en.gz',
'data/en-su/NLLB.en-su.su.gz',
'data/en-su/Tatoeba.en-su.en.gz',
'data/en-su/Tatoeba.en-su.su.gz',
'data/en-su/XLEnt.en-su.en.gz',
'data/en-su/XLEnt.en-su.su.gz',
'data/en-su/wikimedia.en-su.en.gz',
'data/en-su/wikimedia.en-su.su.gz',
'data/en-tl/CCAligned.en-tl.en.gz',
'data/en-tl/CCAligned.en-tl.tl.gz',
'data/en-tl/CCMatrix.en-tl.en.gz',
'data/en-tl/CCMatrix.en-tl.tl.gz',
'data/en-tl/ELRC-wikipedia_health.en-tl.en.gz',
'data/en-tl/ELRC-wikipedia_health.en-tl.tl.gz',
'data/en-tl/GNOME.en-tl.en.gz',
'data/en-tl/GNOME.en-tl.tl.gz',
'data/en-tl/NLLB.en-tl.en.gz',
'data/en-tl/NLLB.en-tl.tl.gz',
'data/en-tl/OpenSubtitles.en-tl.en.gz',
'data/en-tl/OpenSubtitles.en-tl.tl.gz',
'data/en-tl/ParaCrawl.en-tl.en.gz',
'data/en-tl/ParaCrawl.en-tl.tl.gz',
'data/en-tl/QED.en-tl.en.gz',
'data/en-tl/QED.en-tl.tl.gz',
'data/en-tl/TED2020.en-tl.en.gz',
'data/en-tl/TED2020.en-tl.tl.gz',
'data/en-tl/Tatoeba.en-tl.en.gz',
'data/en-tl/Tatoeba.en-tl.tl.gz',
'data/en-tl/Ubuntu.en-tl.en.gz',
'data/en-tl/Ubuntu.en-tl.tl.gz',
'data/en-tl/WikiMatrix.en-tl.en.gz',
'data/en-tl/WikiMatrix.en-tl.tl.gz',
'data/en-tl/XLEnt.en-tl.en.gz',
'data/en-tl/XLEnt.en-tl.tl.gz',
'data/en-tl/bible-uedin.en-tl.en.gz',
'data/en-tl/bible-uedin.en-tl.tl.gz',
'data/en-tl/tico-19.en-tl.en.gz',
'data/en-tl/tico-19.en-tl.tl.gz',
'data/en-tl/wikimedia.en-tl.en.gz',
'data/en-tl/wikimedia.en-tl.tl.gz',
'data/id-bug/wikimedia.bug-id.bug.gz',
'data/id-bug/wikimedia.bug-id.id.gz',
'data/id-jv/CCMatrix.id-jv.id.gz',
'data/id-jv/CCMatrix.id-jv.jv.gz',
'data/id-jv/MultiCCAligned.id-jv.id.gz',
'data/id-jv/MultiCCAligned.id-jv.jv.gz',
'data/id-jv/NLLB.id-jv.id.gz',
'data/id-jv/NLLB.id-jv.jv.gz',
'data/id-jv/QED.id-jv.id.gz',
'data/id-jv/QED.id-jv.jv.gz',
'data/id-jv/Tatoeba.id-jv.id.gz',
'data/id-jv/Tatoeba.id-jv.jv.gz',
'data/id-jv/Ubuntu.id-jv.id.gz',
'data/id-jv/Ubuntu.id-jv.jv.gz',
'data/id-jv/WikiMatrix.id-jv.id.gz',
'data/id-jv/WikiMatrix.id-jv.jv.gz',
'data/id-jv/XLEnt.id-jv.id.gz',
'data/id-jv/XLEnt.id-jv.jv.gz',
'data/id-jv/wikimedia.id-jv.id.gz',
'data/id-jv/wikimedia.id-jv.jv.gz',
'data/id-min/NLLB.id-min.id.gz',
'data/id-min/NLLB.id-min.min.gz',
'data/id-min/Tatoeba.id-min.id.gz',
'data/id-min/Tatoeba.id-min.min.gz',
'data/id-min/wikimedia.id-min.id.gz',
'data/id-min/wikimedia.id-min.min.gz',
'data/id-ms/CCMatrix.id-ms.id.gz',
'data/id-ms/CCMatrix.id-ms.ms.gz',
'data/id-ms/ELRC-wikipedia_health.id-ms.id.gz',
'data/id-ms/ELRC-wikipedia_health.id-ms.ms.gz',
'data/id-ms/GNOME.id-ms.id.gz',
'data/id-ms/GNOME.id-ms.ms.gz',
'data/id-ms/KDE4.id-ms.id.gz',
'data/id-ms/KDE4.id-ms.ms.gz',
'data/id-ms/MultiCCAligned.id-ms.id.gz',
'data/id-ms/MultiCCAligned.id-ms.ms.gz',
'data/id-ms/NLLB.id-ms.id.gz',
'data/id-ms/NLLB.id-ms.ms.gz',
'data/id-ms/NeuLab-TedTalks.id-ms.id.gz',
'data/id-ms/NeuLab-TedTalks.id-ms.ms.gz',
'data/id-ms/OpenSubtitles.id-ms.id.gz',
'data/id-ms/OpenSubtitles.id-ms.ms.gz',
'data/id-ms/QED.id-ms.id.gz',
'data/id-ms/QED.id-ms.ms.gz',
'data/id-ms/TED2020.id-ms.id.gz',
'data/id-ms/TED2020.id-ms.ms.gz',
'data/id-ms/Tanzil.id-ms.id.gz',
'data/id-ms/Tanzil.id-ms.ms.gz',
'data/id-ms/Ubuntu.id-ms.id.gz',
'data/id-ms/Ubuntu.id-ms.ms.gz',
'data/id-ms/XLEnt.id-ms.id.gz',
'data/id-ms/XLEnt.id-ms.ms.gz',
'data/id-ms/wikimedia.id-ms.id.gz',
'data/id-ms/wikimedia.id-ms.ms.gz',
'data/id-su/CCMatrix.id-su.id.gz',
'data/id-su/CCMatrix.id-su.su.gz',
'data/id-su/MultiCCAligned.id-su.id.gz',
'data/id-su/MultiCCAligned.id-su.su.gz',
'data/id-su/NLLB.id-su.id.gz',
'data/id-su/NLLB.id-su.su.gz',
'data/id-su/XLEnt.id-su.id.gz',
'data/id-su/XLEnt.id-su.su.gz',
'data/id-su/wikimedia.id-su.id.gz',
'data/id-su/wikimedia.id-su.su.gz',
'data/ilo-bug/NLLB.bug-ilo.bug.gz',
'data/ilo-bug/NLLB.bug-ilo.ilo.gz',
'data/ilo-id/CCMatrix.id-ilo.id.gz',
'data/ilo-id/CCMatrix.id-ilo.ilo.gz',
'data/ilo-id/NLLB.id-ilo.id.gz',
'data/ilo-id/NLLB.id-ilo.ilo.gz',
'data/ilo-id/XLEnt.id-ilo.id.gz',
'data/ilo-id/XLEnt.id-ilo.ilo.gz',
'data/ilo-jv/CCMatrix.ilo-jv.ilo.gz',
'data/ilo-jv/CCMatrix.ilo-jv.jv.gz',
'data/ilo-jv/NLLB.ilo-jv.ilo.gz',
'data/ilo-jv/NLLB.ilo-jv.jv.gz',
'data/ilo-jv/XLEnt.ilo-jv.ilo.gz',
'data/ilo-jv/XLEnt.ilo-jv.jv.gz',
'data/ilo-min/NLLB.ilo-min.ilo.gz',
'data/ilo-min/NLLB.ilo-min.min.gz',
'data/ilo-ms/CCMatrix.ilo-ms.ilo.gz',
'data/ilo-ms/CCMatrix.ilo-ms.ms.gz',
'data/ilo-ms/NLLB.ilo-ms.ilo.gz',
'data/ilo-ms/NLLB.ilo-ms.ms.gz',
'data/ilo-ms/XLEnt.ilo-ms.ilo.gz',
'data/ilo-ms/XLEnt.ilo-ms.ms.gz',
'data/ilo-su/CCMatrix.ilo-su.ilo.gz',
'data/ilo-su/CCMatrix.ilo-su.su.gz',
'data/ilo-su/NLLB.ilo-su.ilo.gz',
'data/ilo-su/NLLB.ilo-su.su.gz',
'data/ilo-su/XLEnt.ilo-su.ilo.gz',
'data/ilo-su/XLEnt.ilo-su.su.gz',
'data/jv-bug/NLLB.bug-jv.bug.gz',
'data/jv-bug/NLLB.bug-jv.jv.gz',
'data/jv-min/NLLB.jv-min.jv.gz',
'data/jv-min/NLLB.jv-min.min.gz',
'data/jv-min/wikimedia.jv-min.jv.gz',
'data/jv-min/wikimedia.jv-min.min.gz',
'data/jv-su/CCMatrix.jv-su.jv.gz',
'data/jv-su/CCMatrix.jv-su.su.gz',
'data/jv-su/MultiCCAligned.jv-su.jv.gz',
'data/jv-su/MultiCCAligned.jv-su.su.gz',
'data/jv-su/NLLB.jv-su.jv.gz',
'data/jv-su/NLLB.jv-su.su.gz',
'data/jv-su/XLEnt.jv-su.jv.gz',
'data/jv-su/XLEnt.jv-su.su.gz',
'data/min-bug/NLLB.bug-min.bug.gz',
'data/min-bug/NLLB.bug-min.min.gz',
'data/ms-jv/CCMatrix.jv-ms.jv.gz',
'data/ms-jv/CCMatrix.jv-ms.ms.gz',
'data/ms-jv/MultiCCAligned.jv-ms.jv.gz',
'data/ms-jv/MultiCCAligned.jv-ms.ms.gz',
'data/ms-jv/NLLB.jv-ms.jv.gz',
'data/ms-jv/NLLB.jv-ms.ms.gz',
'data/ms-jv/QED.jv-ms.jv.gz',
'data/ms-jv/QED.jv-ms.ms.gz',
'data/ms-jv/Ubuntu.jv-ms.jv.gz',
'data/ms-jv/Ubuntu.jv-ms.ms.gz',
'data/ms-jv/XLEnt.jv-ms.jv.gz',
'data/ms-jv/XLEnt.jv-ms.ms.gz',
'data/ms-jv/wikimedia.jv-ms.jv.gz',
'data/ms-jv/wikimedia.jv-ms.ms.gz',
'data/ms-min/wikimedia.min-ms.min.gz',
'data/ms-min/wikimedia.min-ms.ms.gz',
'data/ms-su/CCMatrix.ms-su.ms.gz',
'data/ms-su/CCMatrix.ms-su.su.gz',
'data/ms-su/MultiCCAligned.ms-su.ms.gz',
'data/ms-su/MultiCCAligned.ms-su.su.gz',
'data/ms-su/NLLB.ms-su.ms.gz',
'data/ms-su/NLLB.ms-su.su.gz',
'data/ms-su/XLEnt.ms-su.ms.gz',
'data/ms-su/XLEnt.ms-su.su.gz',
'data/ms-su/wikimedia.ms-su.ms.gz',
'data/ms-su/wikimedia.ms-su.su.gz',
'data/su-bug/NLLB.bug-su.bug.gz',
'data/su-bug/NLLB.bug-su.su.gz',
'data/su-min/NLLB.min-su.min.gz',
'data/su-min/NLLB.min-su.su.gz',
'data/tl-ceb/CCMatrix.ceb-tl.ceb.gz',
'data/tl-ceb/CCMatrix.ceb-tl.tl.gz',
'data/tl-ceb/NLLB.ceb-tl.ceb.gz',
'data/tl-ceb/NLLB.ceb-tl.tl.gz',
'data/tl-ceb/QED.ceb-tl.ceb.gz',
'data/tl-ceb/QED.ceb-tl.tl.gz',
'data/tl-ceb/TED2020.ceb-tl.ceb.gz',
'data/tl-ceb/TED2020.ceb-tl.tl.gz',
'data/tl-ceb/Tatoeba.ceb-tl.ceb.gz',
'data/tl-ceb/Tatoeba.ceb-tl.tl.gz',
'data/tl-ceb/Ubuntu.ceb-tl.ceb.gz',
'data/tl-ceb/Ubuntu.ceb-tl.tl.gz',
'data/tl-ceb/XLEnt.ceb-tl.ceb.gz',
'data/tl-ceb/XLEnt.ceb-tl.tl.gz',
'data/tl-ceb/bible-uedin.ceb-tl.ceb.gz',
'data/tl-ceb/bible-uedin.ceb-tl.tl.gz',
'data/tl-ceb/wikimedia.ceb-tl.ceb.gz',
'data/tl-ceb/wikimedia.ceb-tl.tl.gz',
'data/tl-id/CCMatrix.id-tl.id.gz',
'data/tl-id/CCMatrix.id-tl.tl.gz',
'data/tl-id/ELRC-wikipedia_health.id-tl.id.gz',
'data/tl-id/ELRC-wikipedia_health.id-tl.tl.gz',
'data/tl-id/GNOME.id-tl.id.gz',
'data/tl-id/GNOME.id-tl.tl.gz',
'data/tl-id/MultiCCAligned.id-tl.id.gz',
'data/tl-id/MultiCCAligned.id-tl.tl.gz',
'data/tl-id/NLLB.id-tl.id.gz',
'data/tl-id/NLLB.id-tl.tl.gz',
'data/tl-id/OpenSubtitles.id-tl.id.gz',
'data/tl-id/OpenSubtitles.id-tl.tl.gz',
'data/tl-id/QED.id-tl.id.gz',
'data/tl-id/QED.id-tl.tl.gz',
'data/tl-id/TED2020.id-tl.id.gz',
'data/tl-id/TED2020.id-tl.tl.gz',
'data/tl-id/Tatoeba.id-tl.id.gz',
'data/tl-id/Tatoeba.id-tl.tl.gz',
'data/tl-id/Ubuntu.id-tl.id.gz',
'data/tl-id/Ubuntu.id-tl.tl.gz',
'data/tl-id/WikiMatrix.id-tl.id.gz',
'data/tl-id/WikiMatrix.id-tl.tl.gz',
'data/tl-id/XLEnt.id-tl.id.gz',
'data/tl-id/XLEnt.id-tl.tl.gz',
'data/tl-id/bible-uedin.id-tl.id.gz',
'data/tl-id/bible-uedin.id-tl.tl.gz',
'data/tl-id/wikimedia.id-tl.id.gz',
'data/tl-id/wikimedia.id-tl.tl.gz',
'data/tl-ilo/CCMatrix.ilo-tl.ilo.gz',
'data/tl-ilo/CCMatrix.ilo-tl.tl.gz',
'data/tl-ilo/NLLB.ilo-tl.ilo.gz',
'data/tl-ilo/NLLB.ilo-tl.tl.gz',
'data/tl-ilo/XLEnt.ilo-tl.ilo.gz',
'data/tl-ilo/XLEnt.ilo-tl.tl.gz',
'data/tl-jv/CCMatrix.jv-tl.jv.gz',
'data/tl-jv/CCMatrix.jv-tl.tl.gz',
'data/tl-jv/MultiCCAligned.jv-tl.jv.gz',
'data/tl-jv/MultiCCAligned.jv-tl.tl.gz',
'data/tl-jv/NLLB.jv-tl.jv.gz',
'data/tl-jv/NLLB.jv-tl.tl.gz',
'data/tl-jv/QED.jv-tl.jv.gz',
'data/tl-jv/QED.jv-tl.tl.gz',
'data/tl-jv/Ubuntu.jv-tl.jv.gz',
'data/tl-jv/Ubuntu.jv-tl.tl.gz',
'data/tl-jv/XLEnt.jv-tl.jv.gz',
'data/tl-jv/XLEnt.jv-tl.tl.gz',
'data/tl-ms/CCMatrix.ms-tl.ms.gz',
'data/tl-ms/CCMatrix.ms-tl.tl.gz',
'data/tl-ms/ELRC-wikipedia_health.ms-tl.ms.gz',
'data/tl-ms/ELRC-wikipedia_health.ms-tl.tl.gz',
'data/tl-ms/GNOME.ms-tl.ms.gz',
'data/tl-ms/GNOME.ms-tl.tl.gz',
'data/tl-ms/MultiCCAligned.ms-tl.ms.gz',
'data/tl-ms/MultiCCAligned.ms-tl.tl.gz',
'data/tl-ms/NLLB.ms-tl.ms.gz',
'data/tl-ms/NLLB.ms-tl.tl.gz',
'data/tl-ms/OpenSubtitles.ms-tl.ms.gz',
'data/tl-ms/OpenSubtitles.ms-tl.tl.gz',
'data/tl-ms/QED.ms-tl.ms.gz',
'data/tl-ms/QED.ms-tl.tl.gz',
'data/tl-ms/TED2020.ms-tl.ms.gz',
'data/tl-ms/TED2020.ms-tl.tl.gz',
'data/tl-ms/Ubuntu.ms-tl.ms.gz',
'data/tl-ms/Ubuntu.ms-tl.tl.gz',
'data/tl-ms/XLEnt.ms-tl.ms.gz',
'data/tl-ms/XLEnt.ms-tl.tl.gz',
'data/tl-ms/wikimedia.ms-tl.ms.gz',
'data/tl-ms/wikimedia.ms-tl.tl.gz',
'data/tl-su/CCMatrix.su-tl.su.gz',
'data/tl-su/CCMatrix.su-tl.tl.gz',
'data/tl-su/MultiCCAligned.su-tl.su.gz',
'data/tl-su/MultiCCAligned.su-tl.tl.gz',
'data/tl-su/NLLB.su-tl.su.gz',
'data/tl-su/NLLB.su-tl.tl.gz',
'data/tl-su/XLEnt.su-tl.su.gz',
'data/tl-su/XLEnt.su-tl.tl.gz',
]:
  print(f'Processing {d}', flush=True)
  if d.endswith('.gz'):
    print(f'Gunzipping {d} into {d}.txt', flush=True)
    with gzip.open(d, 'rb') as inputF, open(f'{d}.txt', 'wb') as outputF:
      shutil.copyfileobj(inputF, outputF)
    print('Ingesting file...', flush=True)
    learner.ingest_file(f'{d}.txt')
    print(f'Deleting {d}.txt', flush=True)
    os.remove(f'{d}.txt')
  else:
    print('Ingesting file...', flush=True)
    learner.ingest_file(d)

print('Creating BPE model "pyonmt_bpe_indo-pacific_32k_min2"', flush=True)
tokenizer = learner.learn('pyonmt_bpe_indo-pacific_32k_min2')
print('Created BPE model "pyonmt_bpe_indo-pacific_32k_min2"', flush=True)
